!function(t){function h(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var e=".litesuggest-group",n=e+" input",r="litesuggest-suggestions",a="."+r,s=e+" "+a+" ul",l="litesuggest-open",o="litesuggest-focus",u="litesuggest-correct";t.fn.exists=function(){return 0!==this.length};var c=function(t){this.value=t,this.children={}};c.prototype.addChild=function(t){var e=t.value;return e&&t?(this.children[e]=t,!0):(console.error("[LiteSuggest] ERROR: Attempting to add invalid child node to dictionary trie."),!1)},c.prototype.hasChild=function(t){var e=t.value;return this.hasChildValue(e)},c.prototype.hasChildValue=function(t){return t=t,this.children[t]?!0:!1},c.prototype.getChild=function(t){return t=t,this.children[t]},c.prototype.removeChild=function(t){var e=t.value;this.children[e]=null},c.prototype.findAllPaths=function(t){var n,e=[];for(childVal in this.children)"\x00"==childVal?e.push(t):(n=this.children[childVal],e=e.concat(n.findAllPaths(t+n.value)));return e};var f=function(t){if(this.root=new c(""),t)for(i in t)this.addWord(t[i])};f.prototype.addWord=function(t){for(var e=t.split(""),n=0,r=this.root;r.hasChildValue(e[n]);)if(e[n]=h(e[n]),r=r.getChild(e[n]),n++,n>=e.length)return;for(var i;n<e.length;)e[n]=h(e[n]),i=new c(e[n]),r.addChild(i),r=i,n++;r.addChild(new c("\x00"))},f.prototype.findSuggestions=function(t){for(var a,s,e=t.split(""),n=[],r=[this.root],i=[],l=0;l<e.length;l++){e[l]=h(e[l]),a=e[l].toUpperCase(),s=e[l].toLowerCase();for(var o=0;o<r.length;o++)currentNode=r[o],currentNode.hasChildValue(a)&&i.push(currentNode.getChild(a)),currentNode.hasChildValue(s)&&i.push(currentNode.getChild(s));if(0==i.length)return n;r=i,i=[]}for(l=0;l<r.length;l++)n=n.concat(r[l].findAllPaths(""));return n};var d=function(t){this.trie=new f(t.words),this.groupSelector=t.groupSelector,this.tabbables=this.setArray(),this.count=-1,this.name=""};d.prototype.applySuggestions=function(e,r){var i="";t.each(r,function(t,n){e=h(e),i+="<li id='"+e+n+"'>"+e+"<span class='"+u+"'>"+n+"</span></li>"}),t(this.groupSelector+n+"[name='"+this.name+"'] + "+a+" ul").html(i),t(this.groupSelector+n+"[name='"+this.name+"'] + "+a).addClass(l)},d.prototype.incrementCount=function(t,e){return t==e-1?0:t+1},d.prototype.decrementCount=function(t,e){return 0==t?e-1:t-1},d.prototype.generateSuggestions=function(t){return this.trie.findSuggestions(t)},d.prototype.setValue=function(e){return null!=e&&(t(this.groupSelector+n+"[name='"+this.name+"']").val(e.attr("id")),t("."+o).removeClass(o)),t(this.groupSelector+n+"[name='"+this.name+"'] + "+a).removeClass(l),this.tabbables=[],-1},d.prototype.setArray=function(){return t(this.groupSelector+n+"[name='"+this.name+"'] + "+a+" ul li").map(function(){return t(this)}).get()},t.fn.litesuggest=function(e){var c,i=t.extend({},t.fn.litesuggest.defaults,e),u=new d(i),h="<div class='"+r+"'><ul></ul></div>";return c=this.each(function(){t(u.groupSelector).each(function(){t(this).append(h)}),t(this).find(t(u.groupSelector+s)).on("click","li",function(){u.count=u.setValue(t(this))}),t(this).find(t(u.groupSelector+n)).blur(function(){var e=t(this).next();setTimeout(function(){e.removeClass(l),e.find("."+o).removeClass(o),u.count=-1},50)}),t(this).find(t(u.groupSelector+n)).focus(function(){u.name=t(this).attr("name"),u.tabbables.length>0&&t(n+"[name='"+name+"'] + "+a).addClass(l)}),t(this).find(t(u.groupSelector+n)).on("keyup",function(e){if(40==e.which)u.tabbables.length>0&&t(a).hasClass(l)&&(u.count>=0&&u.tabbables[u.count].removeClass(o),u.count=u.incrementCount(u.count,u.tabbables.length),u.tabbables[u.count].addClass(o));else if(38==e.which)u.tabbables.length>0&&t(a).hasClass(l)&&(u.count<u.tabbables.length&&u.count>=0&&u.tabbables[u.count].removeClass(o),u.count=u.decrementCount(u.count,u.tabbables.length),u.tabbables[u.count].addClass(o));else if(13==e.which||39==e.which){var n=t("."+o);n.exists()&&(u.count=u.setValue(n))}else{u.name=t(this).attr("name");var r=t(this).val();if(r){var i=u.generateSuggestions(r);null!=i&&i.length>0?(u.applySuggestions(r,i),u.tabbables=u.setArray(),u.count=-1):u.count=u.setValue(null)}}})})},t.fn.litesuggest.defaults={groupSelector:"",words:[]}}(jQuery);